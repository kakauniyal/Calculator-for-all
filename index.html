<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tool Overhang Calculator</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rajdhani:wght@500&display=swap');

    body {
      font-family: 'Rajdhani', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      background-color: #7DA27D; /* Machine Green */
      border: 8px double #888; /* Gray border */
      box-sizing: border-box;
      padding: 20px;
    }

    .container {
      background-color: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
      text-align: center;
      width: 95%;
      max-width: 500px;
    }

    h2 {
      margin-top: 0;
      font-family: 'Orbitron', sans-serif;
      font-size: 28px;
      color: #2c3e50;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      letter-spacing: 1.5px;
    }

    .notes {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
      border: 2px solid rgba(255, 107, 107, 0.5);
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 20px;
      text-align: center;
      font-size: 16px;
      color: white;
      font-weight: bold;
      box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
      animation: warningPulse 2s ease-in-out infinite;
    }

    @keyframes warningPulse {
      0%, 100% { box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3); }
      50% { box-shadow: 0 8px 35px rgba(255, 107, 107, 0.5); }
    }

    .notes p {
      margin: 6px 0;
      text-transform: uppercase;
      font-style: italic;
    }

    .input-group {
      margin-bottom: 20px;
      text-align: left;
    }

    label {
      display: block;
      margin-bottom: 6px;
      color: #333;
      font-weight: bold;
    }

    input {
      width: 100%;
      padding: 12px;
      box-sizing: border-box;
      border: 2px solid #1565c0;
      border-radius: 6px;
      font-size: 18px;
      color: #0d47a1;
      font-weight: bold;
    }

    button {
      width: 100%;
      padding: 14px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 20px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    button:hover {
      background-color: #004a99;
      transform: scale(1.05);
    }

    #result {
      margin-top: 20px;
      font-size: 22px;
      font-weight: bold;
      color: #333;
      padding: 15px;
      border-radius: 10px;
      transition: all 0.3s ease;
    }

    .credits {
      margin-top: 25px;
      font-size: 12px;
      font-weight: bold;
      text-transform: lowercase;
      color: #444;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>üîß Tool Overhang Calculator</h2>

  <!-- Important Notes -->
  <div class="notes">
    <p><b><i>‚ö†Ô∏è This is only theory based - check physically before use</i></b></p>
  </div>

  <div class="input-group">
    <label for="ramSize">RAM Size:</label>
    <input type="number" id="ramSize" placeholder="Enter RAM Size (e.g., 450)" step="0.01">
  </div>

  <div class="input-group">
    <label for="safeDia">Safe Diameter:</label>
    <input type="number" id="safeDia" placeholder="Enter Safe Diameter" step="0.01">
  </div>
  
  <div class="input-group">
    <label for="endDia">End Diameter:</label>
    <input type="number" id="endDia" placeholder="Enter End Diameter" step="0.01">
  </div>
  
  <button onclick="calculateOverhang()">Calculate Tool Overhang</button>
  <p id="result">Result will appear here</p>

  <!-- Credits Line -->
  <p class="credits">
    Enhanced formula with dynamic RAM size validation
  </p>
</div>

<script>
  // Add real-time validation for Safe Dia
  document.getElementById('safeDia').addEventListener('input', function() {
    validateSafeDia();
  });

  // Add real-time validation for End Dia
  document.getElementById('endDia').addEventListener('input', function() {
    validateEndDia();
  });

  function validateSafeDia() {
    const ramSize = parseFloat(document.getElementById('ramSize').value);
    const safeDia = parseFloat(document.getElementById('safeDia').value);
    
    if (!isNaN(ramSize) && !isNaN(safeDia)) {
      // Calculate hypotenuse of square RAM: ‚àö(RAM¬≤ + RAM¬≤) = RAM‚àö2
      const minSafeDia = ramSize * Math.sqrt(2);
      if (safeDia < minSafeDia) {
        showResult(`ERROR: Safe Dia must be at least ${minSafeDia.toFixed(2)} (hypotenuse of RAM ${ramSize})`, "red");
        return false;
      } else {
        clearResult();
      }
    }
    return true;
  }

  function validateEndDia() {
    const safeDia = parseFloat(document.getElementById('safeDia').value);
    const endDia = parseFloat(document.getElementById('endDia').value);
    
    if (!isNaN(safeDia) && !isNaN(endDia)) {
      if (endDia <= safeDia) {
        showResult("ERROR: End Dia must be greater than Safe Dia.", "red");
        return false;
      } else {
        clearResult();
      }
    }
    return true;
  }

  function calculateOverhang() {
    // Get input values
    const ramSize = parseFloat(document.getElementById('ramSize').value);
    const safeDia = parseFloat(document.getElementById('safeDia').value);
    const endDia = parseFloat(document.getElementById('endDia').value);

    // Validate inputs
    if (isNaN(ramSize) || isNaN(safeDia) || isNaN(endDia)) {
      showResult("ERROR: Please enter valid numbers for all fields.", "red");
      return;
    }

    // Calculate minimum safe diameter as hypotenuse of square RAM: ‚àö(RAM¬≤ + RAM¬≤) = RAM‚àö2
    const minSafeDia = ramSize * Math.sqrt(2);
    
    // Validate Safe Dia is not lower than minimum required
    if (safeDia < minSafeDia) {
      showResult(`ERROR: Safe Dia must be at least ${minSafeDia.toFixed(2)} (hypotenuse of RAM ${ramSize})`, "red");
      return;
    }

    // Validate End Dia is greater than Safe Dia
    if (endDia <= safeDia) {
      showResult("ERROR: End Dia must be greater than Safe Dia.", "red");
      return;
    }

    // Calculate constant based on RAM size (RAM size / 2)¬≤
    const halfRam = ramSize / 2;
    const constant = halfRam * halfRam;

    const a = safeDia / 2;
    const a_squared = a * a;
    const result_minus_constant = a_squared - constant;

    if (result_minus_constant < 0) {
      showResult("ERROR: INVALID SAFE DIA CALCULATION.", "red");
      return;
    }

    const squareRootResult = Math.sqrt(result_minus_constant);
    const finalCalculation = a - squareRootResult;

    const endHalf = endDia / 2;
    const safeHalf = safeDia / 2;
    const subtractionResult = endHalf - safeHalf;

    const grandTotal = finalCalculation + subtractionResult;

    if (grandTotal < 0) {
      showResult("ERROR: PLEASE INPUT CORRECT SAFE DIA AND END DIA.", "red");
    } else {
      showResult("TOTAL TOOL OVERHANG INCLUDING CASSETTE: " + grandTotal.toFixed(2), "green");
    }
  }

  function showResult(message, color) {
    const resultDiv = document.getElementById('result');
    resultDiv.textContent = message;
    
    if (color === 'red') {
      resultDiv.style.background = 'linear-gradient(135deg, #ff4757 0%, #c44569 100%)';
      resultDiv.style.color = 'white';
      resultDiv.style.boxShadow = '0 6px 20px rgba(255, 71, 87, 0.4)';
      resultDiv.style.border = '2px solid rgba(255, 71, 87, 0.6)';
    } else if (color === 'green') {
      resultDiv.style.background = 'linear-gradient(135deg, #2ed573 0%, #17c0eb 100%)';
      resultDiv.style.color = 'white';
      resultDiv.style.boxShadow = '0 6px 20px rgba(46, 213, 115, 0.4)';
      resultDiv.style.border = '2px solid rgba(46, 213, 115, 0.6)';
    }
  }

  function clearResult() {
    const resultDiv = document.getElementById('result');
    resultDiv.textContent = 'Result will appear here';
    resultDiv.style.background = '';
    resultDiv.style.color = '#333';
    resultDiv.style.boxShadow = '';
    resultDiv.style.border = '';
  }

  // Allow Enter key to calculate
  document.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      calculateOverhang();
    }
  });
</script>

</body>
</html>
